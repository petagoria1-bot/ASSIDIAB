import { useSettingsStore } from '../store/settingsStore.ts';
import { quizData as quizDataFR } from '../data/quizData.ts';
import { MealTime } from '../types.ts';

// Mock translations. In a real app, these would be in separate files (e.g., JSON).
const fr = {
  locale: 'fr',
  isRTL: false,
  // Nav
  nav_home: "Accueil",
  nav_calculator: "Calcul",
  nav_journal: "Activité",
  nav_reports: "Rapports",
  nav_settings: "Profil",
  nav_inbox: "Messages",
  // Quiz
  quizData: quizDataFR,
  quiz_title: "Le saviez-vous ?",
  quiz_nextQuestion: "Question suivante",
  // Common
  common_save: "Enregistrer",
  common_cancel: "Annuler",
  common_confirm: "Confirmer",
  common_optional: "Optionnel",
  common_loading: "Chargement...",
  common_creating: "Création...",
  common_min: "Min",
  common_max: "Max",
  common_name: "Nom",
  common_firstName: "Prénom",
  common_birthDate: "Date de naissance",
  common_datetime: "Date et heure",
  common_correction: "Correction",
  common_description: "Description",
  common_carbs: "Glucides",
  // Toasts
  toast_fillAllFields: "Veuillez remplir tous les champs.",
  toast_profileCreated: (name: string) => `Profil pour ${name} créé !`,
  toast_userNotFound: "Utilisateur non trouvé. Veuillez vous reconnecter.",
  toast_passwordsDoNotMatch: "Les mots de passe ne correspondent pas.",
  toast_nameAndBirthdateRequired: "Le prénom et la date de naissance sont requis.",
  toast_settingsSaved: "Paramètres enregistrés avec succès.",
  toast_caregiverRemoved: "Membre supprimé.",
  toast_permissionsUpdated: "Permissions mises à jour.",
  toast_invitationSent: "Invitation envoyée !",
  toast_invalidEmail: "Veuillez entrer une adresse e-mail valide.",
  toast_inviteError: "Erreur lors de l'envoi de l'invitation.",
  toast_caregiverRemoveError: "Erreur lors de la suppression du membre.",
  toast_measureAdded: (gly: number) => `Mesure (${gly} g/L) ajoutée.`,
  toast_bolusAdded: (dose: number) => `Bolus de ${dose}U ajouté.`,
  toast_eventAdded: "Événement ajouté.",
  toast_eventCompleted: (title: string) => `"${title}" marqué comme terminé.`,
  toast_eventReactivated: (title: string) => `"${title}" réactivé.`,
  toast_invalidGlycemia: "Veuillez entrer une glycémie valide.",
  toast_invalidDose: "Veuillez entrer une dose valide.",
  toast_calculationIncomplete: "Calcul incomplet. Impossible de sauvegarder.",
  toast_bolusSaved: (dose: number) => `Bolus de ${dose}U et repas enregistrés.`,
  toast_bolusSaveError: "Erreur lors de l'enregistrement du bolus.",
  toast_foodNameRequired: "Le nom de l'aliment est requis.",
  toast_invalidCarbs: "Veuillez entrer une valeur de glucides valide.",
  toast_invalidFiber: "Veuillez entrer une valeur de fibres valide.",
  toast_foodUpdated: (name: string) => `"${name}" mis à jour.`,
  toast_foodAdded: (name: string) => `"${name}" ajouté à la bibliothèque.`,
  toast_foodRemoved: "Aliment supprimé.",
  toast_comingSoon: "Bientôt disponible !",
  toast_invalidKetone: "Valeur de cétone invalide.",
  toast_invalidWeight: "Poids invalide.",
  toast_invalidQuantity: "Quantité invalide.",
  toast_fillAllFieldsCorrectly: "Veuillez remplir tous les champs correctement.",
  toast_snackAdded: "Collation ajoutée au journal.",
  toast_titleRequired: "Le titre est requis.",
  toast_datetimeRequired: "La date et l'heure sont requises.",
  // Auth Page
  auth_appTitle: "Diab'Assistant",
  auth_subtitle: "Votre assistant personnel pour la gestion du diabète de type 1.",
  auth_welcomeTitle: "Bienvenue",
  auth_googleSignIn: "S'inscrire ou se connecter avec Google",
  // Onboarding & Initial Setup
  onboarding_welcome: "Bienvenue !",
  onboarding_subtitle: "Commençons par créer le profil du patient.",
  onboarding_firstNamePlaceholder: "ex: Léo",
  onboarding_startButton: "Commencer l'aventure",
  onboarding_helperText: "Vous pourrez configurer les détails (objectifs, ratios...) dans les paramètres.",
  initialSetup_title: "Configuration du profil",
  initialSetup_whoAreYou: "Pour commencer, qui êtes-vous ?",
  initialSetup_iAmPatient: "Je suis le/la patient(e)",
  initialSetup_iAmCaregiver: "J'accompagne un patient",
  initialSetup_yourRole: "Quel est votre lien avec le patient ?",
  initialSetup_role_dad: "Papa",
  initialSetup_role_mom: "Maman",
  initialSetup_role_sister: "Sœur",
  initialSetup_role_brother: "Frère",
  initialSetup_role_doctor: "Médecin traitant",
  initialSetup_role_endo: "Endocrinologue",
  initialSetup_role_diet: "Diététicien(ne)",
  initialSetup_role_other: "Autre proche",
  initialSetup_patientInfoTitle: "Qui est le patient ?",
  initialSetup_patientInfoSubtitle: "Renseignez ses informations pour créer son profil.",
  initialSetup_createProfileButton: "Créer le profil",
  // Role Confirmation
  roleConfirmation_title: "Vous avez une invitation !",
  roleConfirmation_message: (name: string, role: string) => `Le profil de **${name}** vous invite à rejoindre son cercle de soins en tant que **${role}**.`,
  roleConfirmation_isThisCorrect: "Est-ce correct ?",
  roleConfirmation_decline: "Refuser",
  roleConfirmation_confirmAndAccess: "Confirmer et Accéder",
  // Inbox
  inbox_title: "Boîte de réception",
  inbox_empty: "Vous n'avez aucun message pour le moment.",
  inbox_fromSystem: "Système",
  message_invitationDeclined: (email: string, patientName: string) => `${email} a refusé l'invitation pour le profil de ${patientName}.`,
  // Dashboard
  greeting_morning: "Bonjour",
  greeting_afternoon: "Bon après-midi",
  greeting_evening: "Bonsoir",
  dashboard_currentGlucose: "Glycémie Actuelle",
  dashboard_noMeasure: "Aucune mesure récente",
  dashboard_todayChecks: (count: number) => `${count} contrôle${count > 1 ? 's' : ''} aujourd'hui`,
  dashboard_addBreakfast: "Ajouter le Petit-déjeuner",
  dashboard_addLunch: "Ajouter le Déjeuner",
  dashboard_addSnack: "Ajouter un Goûter",
  dashboard_addDinner: "Ajouter le Dîner",
  dashboard_action_calculate: "Calculer un Bolus",
  dashboard_quickMeasure: "Glycémie",
  dashboard_manualBolus: "Bolus",
  dashboard_action_emergency: "Urgence",
  dashboard_eventsTitle: "Prochains Événements",
  dashboard_noEvents: "Aucun événement programmé. Profitez de votre journée !",
  dashboard_addEvent: "Ajouter un événement",
  dashboard_todayAt: (time: string) => `Aujourd'hui à ${time}`,
  dashboard_tomorrowAt: (time: string) => `Demain à ${time}`,
  dashboard_dataAnalysisTitle: "Analyse des Données",
  dashboard_dataAnalysisText: "Visualisez vos progrès et tendances glycémiques.",
  dashboard_dataAnalysisButton: "Voir mes rapports",
  dashboard_markCompleted: "Marquer comme terminé",
  dashboard_markPending: "Marquer comme à faire",
  dashboard_inbox_title: "Boîte de réception",
  dashboard_inbox_unread_one: "Vous avez 1 nouveau message.",
  dashboard_inbox_unread_many: (count: number) => `Vous avez ${count} nouveaux messages.`,
  dashboard_inbox_all_read: "Vos messages sont à jour.",
  // Calculator
  calculator_title: "Calculateur de Bolus",
  calculator_glycemiaAndTimeTitle: "Glycémie & Moment",
  calculator_glycemiaLabel: "Glycémie (g/L)",
  calculator_mealTimeLabel: "Repas",
  calculator_resultTitle: "Résultat du Calcul",
  calculator_resultMealDose: (dose: number, carbs: number) => `Bolus repas : ${dose.toFixed(1)} U (pour ${carbs}g)`,
  calculator_resultCorrectionDose: (dose: number, gly: string) => `Correction : +${dose} U (pour ${gly} g/L)`,
  calculator_bolusDetails: (repas: number, corr: number) => `Repas: ${repas.toFixed(1)}U, Correction: ${corr}U`,
  calculator_saveButton: "Enregistrer le bolus complet",
  // Dose Explanation
  doseExplanation_title: "Détail du calcul du bolus",
  doseExplanation_mealTitle: "Bolus Repas",
  doseExplanation_mealDetail: (carbs: number, ratio: number) => `${carbs}g de glucides / ratio de ${ratio} =`,
  doseExplanation_correctionTitle: "Bolus de Correction",
  doseExplanation_correctionDetail: (gly: string) => `Basé sur la glycémie de ${gly} g/L`,
  doseExplanation_warningTitle: "Avertissement",
  doseExplanation_totalTitle: "Dose Totale Proposée",
  doseExplanation_close: "Fermer",
  // Meal Builder
  mealBuilder_title: "Composition du repas",
  mealBuilder_searchPlaceholder: "Rechercher un aliment...",
  mealBuilder_start: "Commencez par ajouter des aliments à votre repas.",
  mealBuilder_packagingCalc: "Calcul via emballage",
  mealBuilder_photoScan: "Scanner une photo",
  mealBuilder_netCarbs: "Glucides nets",
  mealBuilder_totalCarbs: "Glucides totaux",
  mealBuilder_removeItemAria: (name: string) => `Supprimer ${name}`,
  // Add Food Confirmation
  addFood_confirm_title: "Quantité",
  addFood_confirm_quantity: "Quantité consommée",
  addFood_confirm_calculatedCarbs: "Glucides calculés",
  addFood_confirm_addToMeal: "Ajouter au repas",
  // Food Library
  foodLibrary_title: "Bibliothèque d'Aliments",
  foodLibrary_searchPlaceholder: (count: number) => `Rechercher parmi ${count} aliments...`,
  foodLibrary_per100: (unit: string) => `/ 100${unit}`,
  foodLibrary_noResults: (term: string) => `Aucun résultat pour "${term}".`,
  foodLibrary_addFood: "Ajouter un aliment",
  // Add/Edit Food Modal
  addFood_editTitle: "Modifier l'aliment",
  addFood_addTitle: "Ajouter un aliment",
  addFood_foodNameLabel: "Nom de l'aliment",
  addFood_foodNamePlaceholder: "Ex: Pomme Golden",
  addFood_per100g: "par 100g",
  addFood_per100ml: "par 100ml",
  addFood_totalCarbsLabel: "Glucides (g)",
  addFood_fiberLabel: "Fibres (g)",
  addFood_manualCategory: "Ajout manuel",
  addFood_manualSource: "Utilisateur",
  // Packaging Calculator
  packaging_title: "Calculateur d'emballage",
  packaging_foodNamePlaceholder: "Ex: Yaourt aux fruits",
  packaging_grams: "Grammes (g)",
  packaging_milliliters: "Millilitres (ml)",
  packaging_labelInfo: "Informations de l'étiquette :",
  packaging_forWeight: "Pour",
  packaging_consumedWeight: "Poids consommé",
  packaging_consumedWeightPlaceholder: "Ex: 125",
  packaging_totalCarbsResult: "Total glucides pour votre portion",
  packaging_addToMeal: "Ajouter au repas",
  packaging_calculatedFoodName: (name: string) => `${name} (calculé)`,
  packaging_calculatedCategory: "Calculé",
  packaging_source: "Emballage",
  // Edit Meal Item
  editMeal_title: "Modifier la quantité",
  editMeal_newQuantityLabel: "Nouvelle quantité",
  // Journal
  journal_title: "Journal du jour",
  journal_timelineView: "Vue Chronologique",
  journal_viewDay: "Jour",
  journal_viewWeek: "Semaine",
  journal_viewMonth: "Mois",
  journal_emptyPeriod: "Aucune donnée pour cette période.",
  journal_emptyDay: "Aucune donnée pour ce jour. Ajoutez une mesure ou un repas pour commencer !",
  journal_addBreakfast: "Ajouter un petit-déj",
  journal_addLunch: "Ajouter un déjeuner",
  journal_addSnackTime: "Ajouter un goûter",
  journal_addDinner: "Ajouter un dîner",
  journal_addSnack: "Ajouter une entrée",
  journal_showDetails: "Voir détails",
  journal_hideDetails: "Masquer détails",
  journal_ketone: "Cétone",
  journal_thisWeek: "Cette semaine",
  // Add Event Choice Modal
  addEventChoice_title: "Ajouter une entrée",
  addEventChoice_measure: "Glycémie",
  addEventChoice_snack: "Collation",
  // Add Snack Modal
  addSnack_title: "Ajouter une collation",
  addSnack_totalCarbs: "Total des glucides (g)",
  addSnack_note: "Note",
  // History (deprecated, using Journal)
  history_title: "Historique",
  history_today: "Aujourd'hui",
  history_yesterday: "Hier",
  history_empty: "L'historique est vide.",
  history_glucose_title: "Glycémie",
  history_meal_title: "Repas",
  history_bolus_title: "Bolus Rapide",
  history_carbs_unit: "g",
  history_insulin_unit: "U",
  history_activity_title: "Activité",
  history_activity_unit: "min",
  history_note_title: "Note",
  // Emergency
  emergency_title: "Urgences & Protocoles",
  emergency_contactsTitle: "Contacts d'Urgence",
  emergency_generalServices: "Services généraux",
  emergency_samu: "SAMU",
  emergency_european: "N° Européen",
  emergency_personalContacts: "Contacts personnels",
  emergency_noContacts: "Aucun contact personnel ajouté.",
  emergency_hypoButton: "Hypo",
  emergency_hypoSubtitle: "< 0.70 g/L",
  emergency_hyperButton: "Hyper",
  emergency_hyperSubtitle: "> 2.50 g/L",
  emergency_ketoneButton: "Acétone",
  emergency_ketoneSubtitle: "Cétones > 0.6",
  emergencyProtocols: {
    hypo: {
        title: "Protocole Hypoglycémie",
        step1: (min: number) => `Si glycémie < ${min.toFixed(2)} g/L, se re-sucrer.`,
        step2: "Prendre 15g de sucre rapide (3 sucres, 1 briquette de jus).",
        step3: "Contrôler la glycémie 15 minutes plus tard.",
        step4: "Si la glycémie est toujours basse, reprendre 15g de sucre.",
        step5: "Dès que la glycémie est correcte, prendre une collation (glucides lents) si le repas est dans plus d'une heure.",
    },
    hyper: {
        title: "Protocole Hyperglycémie",
        step1: (max: number) => `Si glycémie > ${max.toFixed(2)} g/L, faire une correction d'insuline selon le schéma.`,
        step2: "Boire beaucoup d'eau.",
        step3: (delay: number) => `Contrôler la glycémie ${delay} heures plus tard.`,
        step4: "Si l'hyperglycémie persiste, vérifier la présence de cétones (acétone).",
        step5: "Contacter un professionnel de santé si la situation ne s'améliore pas.",
    },
    acetone: {
        title: "Protocole Acétone (Cétones)",
        step1: "Si les cétones sont > 0.6 mmol/L, une correction d'insuline est impérative.",
        step2: "Boire abondamment (un grand verre d'eau toutes les 30 minutes).",
        step3: "Reposer et éviter toute activité physique.",
        step4: "Contrôler la glycémie et les cétones toutes les 2 heures.",
        step5: "Si les cétones augmentent ou si vomissements, contacter immédiatement un service d'urgence.",
    }
  },
  emergency_patientTitle: "Infos Patient",
  // Reports
  reports_title: "Rapports d'Analyse",
  reports_days: (d: number) => `${d} jours`,
  reports_keyStats: "Statistiques Clés",
  reports_tir: "Temps dans la cible (TIR)",
  reports_avgGlucose: "Glycémie moyenne",
  reports_hypos: "Événements Hypo",
  reports_hypers: "Événements Hyper",
  reports_noDataPeriod: "Pas assez de données sur cette période.",
  reports_dailyChart: "Graphique Journalier",
  reports_noData: "Aucune donnée de glycémie pour ce jour.",
  reports_selectDayWithData: "Sélectionnez un jour avec des données pour voir le graphique.",
  // PAI
  pai_title: (name: string) => `PAI de ${name}`,
  pai_subtitle: "Projet d'Accueil Individualisé",
  pai_generalInfo: "Informations Générales",
  pai_glycemicTargets: "Objectifs Glycémiques",
  pai_target: "Objectif Cible",
  pai_ratios: "Ratios Insuline/Glucides",
  pai_ratiosSubtitle: "1 unité d'insuline pour X grammes de glucides",
  pai_correctionSchema: "Schéma de Correction",
  pai_correctionSchemaSubtitle: "Unités à ajouter en fonction de la glycémie",
  pai_correctionRuleFirst: (max: number) => `Si < ${max.toFixed(2)} g/L`,
  pai_correctionRuleNext: (prevMax: number, max: number) => `Si entre ${prevMax.toFixed(2)} et ${max.toFixed(2)} g/L`,
  pai_correctionDelay: (hours: number) => `Attendre au moins ${hours}h entre 2 corrections.`,
  pai_notes: "Notes Additionnelles",
  pai_noNotes: "Aucune note.",
  // Settings
  settings_title: "Réglages",
  settings_language: "Langue",
  settings_translateFood: "Traduire les aliments (Beta)",
  settings_translateFood_description: "Tente de traduire les noms d'aliments de la bibliothèque dans la langue sélectionnée.",
  settings_profile: "Profil du patient",
  settings_glycemicTargets: "Objectifs Glycémiques",
  settings_ratios: "Ratios Insuline/Glucides",
  settings_emergencyContacts: "Contacts d'Urgence",
  settings_addContact: "+ Ajouter un contact",
  settings_contactRelation: "Lien (ex: Papa)",
  settings_contactPhone: "Téléphone",
  settings_viewPai: "Voir le PAI complet",
  settings_logout: "Se déconnecter",
  settings_calculation_title: "Préférences de Calcul",
  settings_ratio_reminder: "Rappel du Ratio",
  settings_ratio_reminder_desc: "Affiche une confirmation du ratio et de la dose avant d'enregistrer un bolus.",
  settings_editPermissionsAria: (email: string) => `Modifier les permissions pour ${email}`,
  settings_removeCaregiverAria: (email: string) => `Supprimer ${email}`,
  // Family & Sharing
  settings_family_title: "Partage & Famille",
  settings_family_description: "Invitez des membres de la famille, des médecins ou des soignants pour consulter les données.",
  settings_family_invite: "Inviter un membre",
  settings_family_pending: "en attente",
  settings_family_active: "actif",
  // Invite Modal
  invite_title: "Inviter un membre",
  invite_email_label: "E-mail du membre",
  invite_email_placeholder: "exemple@email.com",
  invite_role_label: "Quel est son rôle ?",
  invite_button: "Envoyer l'invitation",
  // Roles
  role_owner: "Propriétaire",
  role_parent: "Parent",
  role_health_professional: "Professionnel de santé",
  role_family: "Famille / Proche",
  role_school: "Personnel scolaire / Soignant",
  // Permissions Modal
  permissions_title: (email: string) => `Permissions pour ${email}`,
  permissions_permission_canViewJournal: "Accès au journal (Lecture)",
  permissions_permission_canViewJournal_desc: "Peut voir les glycémies, repas et injections.",
  permissions_permission_canEditJournal: "Gestion du quotidien (Écriture)",
  permissions_permission_canEditJournal_desc: "Peut ajouter des mesures, repas et bolus manuels.",
  permissions_permission_canEditPAI: "Gestion du PAI (Critique)",
  permissions_permission_canEditPAI_desc: "Peut modifier les ratios, objectifs et schémas.",
  permissions_permission_canManageFamily: "Gestion des membres (Admin)",
  permissions_permission_canManageFamily_desc: "Peut inviter, supprimer et gérer les permissions des autres.",
  permissions_warning_critical: "ATTENTION : Donne le droit de modifier les paramètres de traitement.",
  permissions_warning_admin: "ATTENTION : Donne des droits d'administration sur le cercle de soins.",
  // Quick Add Modals
  quickAdd_measureTitle: "Ajout rapide d'une mesure",
  quickAdd_bolusTitle: "Ajout rapide d'un bolus",
  quickAdd_glycemiaLabel: "Glycémie (g/L)",
  quickAdd_ketoneLabel: "Cétone (mmol/L)",
  quickAdd_doseLabel: "Dose d'insuline (U)",
  quickAdd_injectionType: "Type d'injection",
  quickAdd_rapid: "Repas",
  // Ratio Reminder Modal
  ratioReminder_title: "Rappel du Ratio",
  ratioReminder_forMeal: (meal: string) => `Pour le ${meal}`,
  ratioReminder_ratioIs: (ratio: number) => `le ratio est 1U pour ${ratio}g.`,
  ratioReminder_doseIs: "Dose totale à enregistrer :",
  ratioReminder_confirm: "Confirmer et Enregistrer",
  // Add Event
  addEvent_title: "Ajouter un événement",
  addEvent_appointment: "Rendez-vous",
  addEvent_note: "Note",
  addEvent_doctorLabel: "Nom du professionnel / Spécialité",
  addEvent_doctorPlaceholder: "Ex: Dr. Martin, Diabétologue",
  addEvent_eventTitleLabel: "Titre de la note",
  addEvent_eventTitlePlaceholder: "Ex: Début du rhume",
  addEvent_additionalInfoLabel: "Informations",
  addEvent_additionalInfoPlaceholder: "Ex: Hôpital Necker, 3ème étage",
  addEvent_descriptionPlaceholder: "Détails...",
  // Progress Card
  progress_gardenTitle: "Mon Jardin du Jour",
  progress_dailyGoals: "Objectifs du jour",
  progress_water: "Hydratation",
  progress_activity: "Activité physique",
  progress_checks: "Contrôles glycémiques",
  progress_quiz: "Mini-quiz",
  progress_completed: "Terminé !",
  progress_pending: "À faire",
  progress_weeklyGoal: "Objectif de la semaine : 5 jours parfaits !",
  // Carb Indicator
  carbIndicator_level_low: "Bas",
  carbIndicator_level_medium: "Moyen",
  carbIndicator_level_high: "Élevé",
  // Meal Times
  mealTimes: {
    petit_dej: "Petit-déjeuner",
    dejeuner: "Déjeuner",
    gouter: "Goûter",
    diner: "Dîner",
    collation: "Collation",
  },
   // Illustrations page
  animations_title: "Illustrations",
  animations_subtitle: "Collection d'animations",
  animations_steam: "Vapeur",
  animations_pulse: "Pouls",
  animations_pen: "Stylo",
  animations_heart: "Coeur",
  animations_calendar: "Calendrier",
  animations_checkmark: "Validation",
  // Error handling
  error_criticalTitle: "Erreur Critique",
  error_loadDataBody: "Impossible de charger les données du profil. Veuillez vérifier votre connexion internet et réessayer.",
  error_retry: "Réessayer",
};
const en = { ...fr, locale: 'en' }; // Placeholder for English

const translations = { fr, en };

const useTranslations = () => {
  const { language } = useSettingsStore();
  return translations[language] || fr;
};

export default useTranslations;