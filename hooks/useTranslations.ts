import { useMemo } from 'react';
import { useSettingsStore, Language } from '../store/settingsStore';
import { QuizQuestion } from '../data/quizData.ts';

// In a real app, these would be in separate JSON files per language.
// Only FR is implemented here for brevity, with English as a partial fallback.
const frTranslations = {
    isRTL: false,
    locale: 'fr-FR',
    common_loading: "Chargement...",
    common_loading_connection: "Connexion...",
    common_creating: "Création...",
    common_optional: "optionnel",
    common_name: "Prénom",
    common_birthDate: "Date de naissance",
    common_firstName: "Prénom",
    common_cancel: "Annuler",
    common_confirm: "Confirmer",
    common_save: "Enregistrer",
    common_description: "Description",
    common_carbs: "Glucides",
    common_correction: "Correction",
    common_datetime: "Date et heure",
    nav_home: "Accueil",
    nav_calculator: "Glucides",
    nav_journal: "Journal",
    nav_reports: "Rapports",
    nav_settings: "Réglages",
    nav_emergency: "Urgence",
    toast_fillAllFields: "Veuillez remplir tous les champs.",
    toast_passwordsDoNotMatch: "Les mots de passe ne correspondent pas.",
    toast_invalidEmail: "Veuillez entrer une adresse e-mail valide.",
    toast_userNotFound: "Utilisateur non trouvé.",
    toast_userNotFound_redirect: "Aucun compte trouvé pour cette adresse. Créez-en un maintenant !",
    toast_profileCreated: (name: string) => `Profil pour ${name} créé !`,
    toast_invitationLinkCreated: "Lien d'invitation créé !",
    toast_invitationLinkCopied: "Lien d'invitation copié !",
    toast_inviteError: "Erreur lors de la création de l'invitation.",
    toast_invitationDeleted: "Invitation supprimée.",
    toast_caregiverRemoveError: "Erreur lors de la suppression.",
    toast_invalidGlycemia: "Veuillez entrer une glycémie valide.",
    toast_invalidWeight: "Poids invalide",
    toast_calculationIncomplete: "Calcul incomplet.",
    toast_bolusSaved: (dose: number) => `Bolus de ${dose}U enregistré !`,
    toast_bolusSaveError: "Erreur lors de l'enregistrement du bolus.",
    toast_measureAdded: (gly: number) => `Glycémie de ${gly} g/L ajoutée.`,
    toast_bolusAdded: (dose: number) => `Bolus de ${dose}U ajouté.`,
    toast_eventAdded: "Événement ajouté !",
    toast_eventCompleted: (title: string) => `Événement "${title}" terminé !`,
    toast_eventReactivated: (title: string) => `Événement "${title}" réactivé.`,
    toast_foodNameRequired: "Le nom de l'aliment est requis.",
    toast_invalidCarbs: "Veuillez entrer une valeur de glucides valide.",
    toast_invalidFiber: "Veuillez entrer une valeur de fibres valide.",
    toast_foodUpdated: (name: string) => `"${name}" mis à jour.`,
    toast_foodAdded: (name: string) => `"${name}" ajouté à la bibliothèque.`,
    toast_fillAllFieldsCorrectly: "Veuillez remplir tous les champs correctement.",
    toast_snackAdded: "Collation ajoutée !",
    toast_titleRequired: "Un titre est requis.",
    toast_datetimeRequired: "La date et l'heure sont requises.",
    toast_invalidDose: "Dose invalide.",
    toast_invalidKetone: "Cétone invalide.",
    auth_appTitle: "Diab'assis",
    auth_subtitle: "Votre assistant diabète au quotidien.",
    auth_loginTitle: "Connexion",
    auth_signupTitle: "Inscription",
    auth_emailPlaceholder: "Adresse e-mail",
    auth_passwordPlaceholder: "Mot de passe",
    auth_confirmPasswordPlaceholder: "Confirmer le mot de passe",
    auth_forgotPassword: "Mot de passe oublié ?",
    auth_loginButton: "Se connecter",
    auth_signupButton: "S'inscrire",
    auth_resetTitle: "Réinitialiser le mot de passe",
    auth_resetSubtitle: "Entrez votre e-mail pour recevoir un lien de réinitialisation.",
    auth_resetButton: "Envoyer le lien",
    auth_backToLogin: "Retour à la connexion",
    auth_resetSuccessTitle: "E-mail envoyé !",
    auth_resetSuccessSubtitle: (email: string) => `Un lien de réinitialisation a été envoyé à <strong>${email}</strong>.`,
    auth_emailExistsTitle: "Compte existant",
    auth_emailExistsSubtitle: "Un compte avec cette adresse e-mail existe déjà. Que souhaitez-vous faire ?",
    auth_goToLogin: "Se connecter",
    auth_saveNewPassword: "Enregistrer le nouveau mot de passe",
    auth_resetSuccessMessage: "Votre mot de passe a été modifié avec succès. Vous allez être redirigé(e).",
    auth_resetError: "Le lien est invalide ou a expiré. Veuillez refaire une demande de réinitialisation.",
    auth_resetGenericError: "Une erreur est survenue. Le mot de passe n'a pas été modifié.",
    onboarding_welcome: "Bienvenue !",
    onboarding_firstNamePlaceholder: "ex: Léo",
    initialSetup_title: "Commençons par créer un profil patient.",
    initialSetup_patientInfoTitle: "Qui est le patient ?",
    initialSetup_patientInfoSubtitle: "Ces informations sont essentielles pour le suivi.",
    initialSetup_createProfileButton: "Créer le profil",
    greeting_morning: "Bonjour",
    greeting_afternoon: "Bon après-midi",
    greeting_evening: "Bonsoir",
    dashboard_currentGlucose: "Dernière glycémie",
    dashboard_noMeasure: "Aucune mesure aujourd'hui",
    dashboard_todayChecks: (count: number) => `${count} contrôle${count > 1 ? 's' : ''} aujourd'hui`,
    dashboard_action_calculate: "Calculer un bolus",
    dashboard_addBreakfast: "Bolus Petit-déjeuner",
    dashboard_addLunch: "Bolus Déjeuner",
    dashboard_addSnack: "Bolus Goûter",
    dashboard_addDinner: "Bolus Dîner",
    dashboard_quickMeasure: "Glycémie",
    dashboard_manualBolus: "Bolus seul",
    dashboard_action_emergency: "Urgence",
    dashboard_eventsTitle: "Prochains événements",
    dashboard_noEvents: "Aucun événement à venir.",
    dashboard_addEvent: "Ajouter un événement",
    dashboard_dataAnalysisTitle: "Analyse des données",
    dashboard_dataAnalysisText: "Visualisez vos tendances et vos progrès.",
    dashboard_dataAnalysisButton: "Voir mes rapports",
    dashboard_markCompleted: "Marquer comme terminé",
    dashboard_markPending: "Marquer comme non terminé",
    dashboard_todayAt: (time: string) => `Aujourd'hui à ${time}`,
    dashboard_tomorrowAt: (time: string) => `Demain à ${time}`,
    dashboard_inbox_title: "Boîte de réception",
    dashboard_inbox_unread_one: "Vous avez 1 nouveau message.",
    dashboard_inbox_unread_many: (count: number) => `Vous avez ${count} nouveaux messages.`,
    dashboard_inbox_all_read: "Tous les messages ont été lus.",
    calculator_title: "Calculateur de bolus",
    calculator_glycemiaAndTimeTitle: "Glycémie & Moment",
    calculator_glycemiaLabel: "Glycémie (g/L)",
    calculator_mealTimeLabel: "Repas",
    calculator_resultTitle: "Dose recommandée",
    calculator_resultMealDose: (dose: number, carbs: number) => `Bolus repas : ${dose.toFixed(1)} U (pour ${carbs.toFixed(0)}g)`,
    calculator_resultCorrectionDose: (dose: number, gly: string) => `+ Correction : ${dose} U (pour ${gly} g/L)`,
    calculator_bolusDetails: (repas: number, corr: number) => `Repas: ${repas.toFixed(1)}U, Corr: ${corr}U`,
    calculator_saveButton: "Enregistrer le bolus",
    journal_title: "Journal du jour",
    journal_addBreakfast: "Ajouter le petit-déjeuner",
    journal_addLunch: "Ajouter le déjeuner",
    journal_addSnackTime: "Ajouter le goûter",
    journal_addDinner: "Ajouter le dîner",
    journal_addSnack: "Ajouter une collation",
    journal_thisWeek: "Cette semaine",
    journal_emptyDay: "Aucun événement enregistré pour cette journée.",
    history_title: "Historique",
    history_today: "Aujourd'hui",
    history_yesterday: "Hier",
    history_empty: "L'historique est vide.",
    history_glucose_title: "Glycémie",
    history_carbs_unit: "g",
    history_meal_title: "Repas",
    history_bolus_title: "Bolus",
    history_insulin_unit: "U",
    history_activity_title: "Activité",
    history_activity_unit: "min",
    history_note_title: "Note",
    reports_title: "Rapports",
    reports_days: (d: number) => `${d} jours`,
    reports_keyStats: "Statistiques clés",
    reports_noDataPeriod: "Pas de données pour cette période.",
    reports_dailyChart: "Graphique journalier",
    reports_noData: "Aucune donnée de glycémie pour ce jour.",
    reports_selectDayWithData: "Sélectionnez un autre jour.",
    reports_tir: "Temps dans la cible",
    reports_avgGlucose: "Glycémie moyenne",
    reports_hypos: "Hypos (< 0.80)",
    reports_hypers: "Hypers (> 1.60)",
    settings_title: "Réglages",
    settings_profile: "Profil",
    settings_pai: "PAI",
    settings_food: "Aliments",
    settings_caregivers: "Cercle de soins",
    settings_display: "Affichage",
    settings_language: "Langue",
    settings_language_desc: "Changer la langue de l'application.",
    settings_animations: "Animations",
    settings_animations_desc: "Voir la galerie d'animations.",
    settings_notifications: "Notifications",
    settings_ratioReminder: "Rappel des ratios",
    settings_ratioReminder_desc: "Afficher une confirmation avant d'enregistrer un bolus.",
    settings_data: "Données",
    settings_data_export: "Exporter les données",
    settings_data_export_desc: "Télécharger un rapport de vos données.",
    settings_data_import: "Importer des données",
    settings_data_import_desc: "Importer des données depuis un fichier.",
    settings_data_delete: "Supprimer les données",
    settings_data_delete_desc: "Effacer toutes les données locales.",
    settings_data_editPai: "Modifier le PAI",
    settings_logout: "Déconnexion",
    pai_title: (name: string) => `PAI de ${name}`,
    pai_subtitle: "Protocole d'Accueil Individualisé",
    pai_generalInfo: "Informations générales",
    pai_glycemicTargets: "Objectifs glycémiques",
    pai_target: "Cible",
    pai_ratios: "Ratios Insuline/Glucides",
    pai_ratiosSubtitle: "1 unité d'insuline pour X grammes de glucides.",
    pai_correctionSchema: "Schéma de correction",
    pai_correctionSchemaSubtitle: "Unités à ajouter en fonction de la glycémie.",
    pai_correctionRuleFirst: (max: number) => `Si ≤ ${max.toFixed(2)} g/L`,
    pai_correctionRuleNext: (prevMax: number, max: number) => `Si > ${prevMax.toFixed(2)} et ≤ ${max.toFixed(2)} g/L`,
    pai_correctionDelay: (hours: number) => `Attendre au moins ${hours}h entre 2 corrections.`,
    pai_notes: "Notes importantes",
    pai_noNotes: "Aucune note.",
    foodLibrary_title: "Bibliothèque d'aliments",
    foodLibrary_searchPlaceholder: (count: number) => `Rechercher parmi ${count} aliments...`,
    foodLibrary_per100: (unit: 'g' | 'ml') => `/ 100${unit}`,
    foodLibrary_noResults: (term: string) => `Aucun résultat pour "${term}".`,
    foodLibrary_addFood: "Ajouter un aliment",
    carbIndicator_level_low: "Bas",
    carbIndicator_level_medium: "Moyen",
    carbIndicator_level_high: "Élevé",
    emergency_title: "Protocoles d'urgence",
    emergency_contactsTitle: "Contacts d'urgence",
    emergency_generalServices: "Services généraux",
    emergency_samu: "SAMU",
    emergency_european: "Urgence (Europe)",
    emergency_personalContacts: "Contacts personnels",
    emergency_noContacts: "Aucun contact personnel ajouté.",
    emergency_hypoButton: "Hypoglycémie",
    emergency_hypoSubtitle: "< 0.70 g/L",
    emergency_hyperButton: "Hyperglycémie",
    emergency_hyperSubtitle: "> 2.50 g/L",
    emergency_ketoneButton: "Acétone",
    emergency_ketoneSubtitle: "Cétones élevées",
    emergency_patientTitle: "Informations patient",
    emergencyProtocols: {
        hypo: {
            title: "Protocole Hypoglycémie",
            step1: (min: number) => `Si la glycémie est inférieure à ${min.toFixed(2)} g/L.`,
            step2: "Donner 15g de sucre rapide (3 morceaux de sucre, 1 petite brique de jus).",
            step3: "Contrôler la glycémie après 15 minutes.",
            step4: "Si la glycémie est toujours basse, redonner 15g de sucre.",
            step5: "Dès que la glycémie est correcte, donner une collation (pain, fruit)."
        },
        hyper: {
            title: "Protocole Hyperglycémie",
            step1: (max: number) => `Si la glycémie est supérieure à ${max.toFixed(2)} g/L et qu'il n'y a pas d'injection prévue.`,
            step2: "Faire une injection de correction selon le schéma du PAI.",
            step3: (delay: number) => `Contrôler la glycémie ${delay} heures plus tard.`,
            step4: "Faire boire de l'eau. Si présence de signes inhabituels (vomissements, douleurs), appeler un médecin."
        },
        acetone: {
            title: "Protocole Acétone (Cétones)",
            step1: "Si les cétones sont > 0.6 mmol/L.",
            step2: "Contacter immédiatement un médecin ou le service de diabétologie.",
            step3: "Faire une injection d'insuline rapide selon le protocole médical.",
            step4: "Faire boire beaucoup d'eau.",
            step5: "Ne pas faire d'activité physique."
        }
    },
    mealTimes: {
        petit_dej: "Petit-déjeuner",
        dejeuner: "Déjeuner",
        gouter: "Goûter",
        diner: "Dîner",
        collation: "Collation"
    },
    addFood_confirm_title: "Ajouter au repas",
    addFood_confirm_quantity: "Quantité",
    addFood_confirm_calculatedCarbs: "Glucides calculés",
    addFood_confirm_addToMeal: "Ajouter au repas",
    addFood_addTitle: "Ajouter un aliment",
    addFood_editTitle: "Modifier un aliment",
    addFood_foodNameLabel: "Nom de l'aliment",
    addFood_foodNamePlaceholder: "Ex: Pain complet",
    addFood_per100g: "Pour 100g",
    addFood_per100ml: "Pour 100ml",
    addFood_totalCarbsLabel: "Glucides totaux",
    addFood_fiberLabel: "dont fibres",
    addFood_manualCategory: "Manuel",
    addFood_manualSource: "Ajout manuel",
    mealBuilder_title: "Composition du repas",
    mealBuilder_searchPlaceholder: "Rechercher un aliment...",
    mealBuilder_noResults: "Aucun aliment trouvé",
    mealBuilder_addFromPackaging: "Calcul emballage",
    mealBuilder_scanBarcode: "Scanner un code-barres",
    mealBuilder_currentMeal: "Repas actuel",
    mealBuilder_emptyMeal: "Commencez par ajouter des aliments.",
    mealBuilder_totalCarbs: "Glucides totaux",
    mealBuilder_netCarbs: "Glucides nets",
    packaging_title: "Calcul depuis l'emballage",
    packaging_foodNamePlaceholder: "Ex: Yaourt aux fruits",
    packaging_grams: "Grammes (g)",
    packaging_milliliters: "Millilitres (ml)",
    packaging_labelInfo: "Informations sur l'étiquette",
    packaging_forWeight: "Pour",
    packaging_consumedWeight: "Quantité consommée",
    packaging_consumedWeightPlaceholder: "Ex: 125",
    packaging_totalCarbsResult: "Total glucides pour votre portion",
    packaging_addToMeal: "Ajouter au repas",
    packaging_calculatedFoodName: (name: string) => `${name} (calculé)`,
    packaging_calculatedCategory: "Calculé",
    packaging_source: "Emballage",
    editMeal_title: "Modifier la quantité",
    editMeal_newQuantityLabel: "Nouvelle quantité",
    doseExplanation_title: "Détail du calcul",
    doseExplanation_mealTitle: "Bolus Repas",
    doseExplanation_mealDetail: (carbs: number, ratio: number) => `${carbs.toFixed(0)}g / ${ratio}g =`,
    doseExplanation_correctionTitle: "Bolus Correction",
    doseExplanation_correctionDetail: (gly: string) => `Basé sur une glycémie de ${gly} g/L`,
    doseExplanation_warningTitle: "Avertissement",
    doseExplanation_totalTitle: "Dose totale arrondie",
    doseExplanation_close: "Fermer",
    quickAdd_measureTitle: "Nouvelle glycémie",
    quickAdd_glycemiaLabel: "Glycémie (g/L)",
    quickAdd_ketoneLabel: "Cétones (mmol/L)",
    quickAdd_bolusTitle: "Bolus manuel",
    quickAdd_doseLabel: "Dose (unités)",
    quickAdd_injectionType: "Type d'injection",
    quickAdd_rapid: "Rapide",
    addEvent_title: "Ajouter un événement",
    addEvent_appointment: "Rendez-vous",
    addEvent_note: "Note",
    addEvent_doctorLabel: "Titre / Spécialiste",
    addEvent_eventTitleLabel: "Titre de la note",
    addEvent_doctorPlaceholder: "Ex: Diabétologue",
    addEvent_eventTitlePlaceholder: "Ex: Journée fatiguante",
    addEvent_additionalInfoLabel: "Informations complémentaires",
    addEvent_descriptionPlaceholder: "Ajouter une description...",
    addEvent_additionalInfoPlaceholder: "Lieu, notes pour le RDV...",
    animations_title: "Galerie d'animations",
    animations_subtitle: "Éléments visuels de l'application",
    animations_steam: "Vapeur",
    animations_pulse: "Pouls",
    animations_pen: "Stylo",
    animations_heart: "Coeur",
    animations_calendar: "Calendrier",
    animations_checkmark: "Validation",
    quiz_title: "Le saviez-vous ?",
    quiz_nextQuestion: "Question suivante",
    progress_gardenTitle: "Votre jardin du jour",
    progress_dailyGoals: "Objectifs du jour",
    progress_water: "Hydratation",
    progress_activity: "Activité",
    progress_checks: "Contrôles glycémiques",
    progress_quiz: "Quiz du jour",
    progress_completed: "Terminé",
    progress_pending: "En attente",
    progress_weeklyGoal: "Objectif de la semaine",
    addEventChoice_title: "Ajouter un événement",
    addEventChoice_measure: "Glycémie",
    addEventChoice_snack: "Collation",
    addSnack_title: "Ajouter une collation",
    addSnack_totalCarbs: "Total glucides (g)",
    addSnack_note: "Note",
    ratioReminder_title: "Confirmation du bolus",
    ratioReminder_forMeal: (meal: string) => `Pour le ${meal}`,
    ratioReminder_ratioIs: (ratio: number) => `votre ratio est de 1U pour ${ratio}g.`,
    ratioReminder_doseIs: "La dose totale calculée est de :",
    ratioReminder_confirm: "Confirmer & Enregistrer",
    invite_title: "Inviter un proche",
    invite_email_label: "E-mail de la personne à inviter",
    invite_email_placeholder: "exemple@email.com",
    invite_role_label: "Son rôle",
    invite_button: "Générer l'invitation",
    role_parent: "Parent / Tuteur",
    role_family: "Famille / Proche",
    role_health_professional: "Professionnel de santé",
    role_school: "Personnel scolaire",
    role_owner: "Propriétaire",
    shareInvite_title: "Invitation prête !",
    shareInvite_description: "Partagez ce lien unique avec la personne que vous souhaitez inviter. Le lien est à usage unique.",
    shareInvite_copyLink: "Copier le lien",
    shareInvite_copied: "Copié !",
    shareInvite_done: "Terminé",
    invitation_invalid: "Lien d'invitation invalide ou expiré.",
    invitation_title: (name: string) => `Vous êtes invité(e) par ${name} !`,
    invitation_subtitle: (patientName: string, role: string) => `Pour rejoindre le cercle de soins de **${patientName}** en tant que **${role}**, veuillez vous connecter ou créer un compte.`,
    invitation_createAccount_prompt: "Connectez-vous ou créez un compte ci-dessous.",
    permissions_title: (email: string) => `Permissions pour ${email}`,
    permissions_permission_canViewJournal: "Voir le journal",
    permissions_permission_canViewJournal_desc: "Permet de consulter les glycémies, repas et injections.",
    permissions_permission_canEditJournal: "Modifier le journal",
    permissions_permission_canEditJournal_desc: "Permet d'ajouter ou de modifier des entrées dans le journal.",
    permissions_permission_canEditPAI: "Modifier le PAI",
    permissions_permission_canEditPAI_desc: "Permet de changer les ratios, cibles et schémas de correction.",
    permissions_permission_canManageFamily: "Gérer le cercle de soins",
    permissions_permission_canManageFamily_desc: "Permit d'inviter ou de retirer des membres.",
    permissions_warning_critical: "ATTENTION : Cette permission donne un accès critique aux paramètres de traitement.",
    permissions_warning_admin: "ATTENTION : Cette personne pourra gérer les accès des autres membres.",
    viewInvite_pendingTitle: (email: string) => `Invitation en attente pour ${email}`,
    viewInvite_pendingDesc: "Cette personne n'a pas encore accepté l'invitation. Vous pouvez lui renvoyer le lien.",
    viewInvite_resend: "Renvoyer l'invitation",
    viewInvite_resending: "Renvoi en cours...",
    viewInvite_delete: "Supprimer l'invitation",
    viewInvite_delete_confirm_title: "Supprimer l'invitation ?",
    viewInvite_delete_confirm_message: "Cette action est irréversible. La personne ne pourra plus utiliser ce lien.",
    inbox_title: "Boîte de réception",
    inbox_empty: "Vous n'avez aucun message.",
    error_criticalTitle: "Oups !",
    error_loadDataBody: "Nous n'avons pas pu charger les données de votre profil. Veuillez vérifier votre connexion et réessayer.",
    error_retry: "Réessayer",
    quizData: [
        {
            question: "Lequel de ces symptômes est typique d'une hypoglycémie ?",
            options: ["Soif intense", "Étourdissements et faiblesse", "Envie fréquente d'uriner"],
            correctAnswerIndex: 1,
            explanation: "L'hypoglycémie (manque de sucre) provoque des tremblements, des sueurs, une faiblesse et des étourdissements. La soif et l'envie d'uriner sont des signes d'hyperglycémie."
        },
        {
            question: "Pour corriger une hypoglycémie, on donne généralement 15g de sucre. Cela équivaut à :",
            options: ["Un grand verre de soda", "3 morceaux de sucre", "Une pomme entière"],
            correctAnswerIndex: 1,
            explanation: "3 morceaux de sucre (5g chacun) ou une petite brique de jus de fruits représentent environ 15g de glucides à action rapide, idéal pour remonter la glycémie."
        },
        {
            question: "À quelle fréquence est-il recommandé de changer un cathéter de pompe à insuline ?",
            options: ["Tous les jours", "Tous les 2 à 3 jours", "Toutes les semaines"],
            correctAnswerIndex: 1,
            explanation: "Changer le site d'infusion tous les 2 à 3 jours est crucial pour assurer une bonne absorption de l'insuline et prévenir les infections ou les lipodystrophies."
        },
        {
            question: "Quel type d'aliment a l'impact le plus LENT sur la glycémie ?",
            options: ["Bonbons", "Pain blanc", "Lentilles"],
            correctAnswerIndex: 2,
            explanation: "Les lentilles, riches en fibres et en protéines, sont des glucides complexes. Leur digestion est plus lente, ce qui entraîne une augmentation progressive de la glycémie."
        },
        {
            question: "Que signifie 'l'acétone' (ou corps cétoniques) dans le sang ou les urines ?",
            options: ["Un excès de sucre dans le corps", "Un manque important d'insuline", "Une bonne hydratation"],
            correctAnswerIndex: 1,
            explanation: "La présence de cétones indique que le corps manque d'insuline et commence à brûler les graisses pour obtenir de l'énergie. C'est un signe d'alerte qui nécessite une action rapide."
        },
        {
            question: "Après une injection de correction pour hyperglycémie, combien de temps faut-il attendre avant de re-contrôler/re-corriger ?",
            options: ["30 minutes", "1 heure", "Au moins 2-3 heures"],
            correctAnswerIndex: 2,
            explanation: "L'insuline rapide met du temps à agir pleinement. Il faut attendre au moins le délai défini dans le PAI (souvent 2-3h) pour éviter le 'stacking' d'insuline et le risque d'hypoglycémie."
        },
        {
            question: "Quel est le principal avantage de compter les glucides 'nets' (totaux - fibres) ?",
            options: ["C'est plus facile à calculer", "C'est plus précis car les fibres impactent peu la glycémie", "Cela permet de manger plus"],
            correctAnswerIndex: 1,
            explanation: "Les fibres ne sont pas digérées de la même manière que les autres glucides et n'élèvent que très peu la glycémie. Le calcul en nets est donc souvent plus juste."
        }
    ] as QuizQuestion[],
};

const enTranslations = { ...frTranslations, locale: 'en-US', nav_home: "Home" /* etc. */ };

const translations = {
    fr: frTranslations,
    en: enTranslations,
    // Other languages would be added here but fallback to french for now
    tr: frTranslations,
    ar: frTranslations,
    ur: frTranslations,
    ps: frTranslations,
    uk: frTranslations,
};

export default function useTranslations() {
  const { language } = useSettingsStore();

  const t = useMemo(() => {
    return translations[language as keyof typeof translations] || frTranslations;
  }, [language]);

  return t;
}